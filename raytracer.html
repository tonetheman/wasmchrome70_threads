<!DOCTYPE html>
<html>
  <title>raytracer from scratchapixel 2</title>
  <body>
    <canvas id="c" width="640" height="480"></canvas>
    <script>

let W = 640, H = 480;
function setpixel(r,g,b,idx) {
    // do the ctx stuff
    if (idx<10) {
      console.log("set pixel called",r,g,b,idx);
    }
    
    let ri = idx*3;
    data[ri+0] = r;
    data[ri+1] = g;
    data[ri+2] = b;
}

function pixelsdone() {
    console.log("pixels are finished!");
    ctx.putImageData(imageData,0,0);
}

function mainline() {

  c = document.getElementById("c");
  ctx = c.getContext("2d");

  imageData = ctx.getImageData(0, 0, W, H);
  data = imageData.data;

  // load the script
  let s = document.createElement("script");
  s.src = "raytracer.js";
  document.body.appendChild(s);

}
window.onload = mainline;

    </script>
  </body>
</html>