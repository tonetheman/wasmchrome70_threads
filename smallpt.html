<html>
<head>
</head>
<body>
    <script>
        var c = null;
        var ctx = null;
        var imageData = null;
        var data = null;

        function setpixel(r,g,b,idx) {
            // do the ctx stuff
            //console.log("set pixel called",r,g,b,idx);
            let ri = idx*4;
            data[ri+0] = r;
            data[ri+1] = g;
            data[ri+2] = b;
            data[ri+3] = 255;
        }

        function pixelsdone() {
            console.log("pixels are finished!");
            ctx.putImageData(imageData,0,0);
        }

        function mainline() {

            c = document.getElementById("c");
            ctx = c.getContext("2d");

            imageData = ctx.getImageData(0, 0, c.width, c.height);
            data = imageData.data;

            // load the script
            let s = document.createElement("script");
            s.src = "smallpt.js";
            document.body.appendChild(s);

        }
        window.onload = mainline;
    </script>

    
    <canvas id="c" width="1024" height="768"></canvas>
</body>
</html>
